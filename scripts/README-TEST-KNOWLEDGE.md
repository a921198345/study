# 知识库测试工具

这个文档提供了如何使用知识库测试工具的说明，帮助你验证上传到知识库的内容是否可以被正确检索。

## 测试知识库搜索

使用以下命令来测试知识库搜索：

```bash
node scripts/test-knowledge-search.js --query "你的查询内容"
```

例如：
```bash
node scripts/test-knowledge-search.js --query "民法的基本原则"
```

## 功能特点

- 直接从命令行搜索知识库内容
- 显示搜索结果的相关学科和章节信息
- 展示内容摘要，方便快速浏览
- 提供清晰的格式化输出

## 工作原理

1. 脚本从命令行参数中获取查询内容
2. 使用Supabase的模糊匹配功能在知识库中查找相关内容（标题和内容字段）
3. 显示搜索结果，包括标题和内容摘要

## 示例输出

当你执行搜索命令后，将看到类似下面的输出：

```
正在搜索: "民法的基本原则"

找到 3 条相关知识点:

[1] 民法基础知识 - 第1部分 (法律 > 法律基础知识)
----------------------------
民法是调整平等主体的自然人、法人和非法人组织之间的人身关系和财产关系的法律规范的总称。民法坚持人文关怀，强调对当事人合法权益的保护...

[2] 民法基础知识 - 第2部分 (法律 > 法律基础知识)
----------------------------
1. **平等原则**：民事主体在民事活动中的法律地位一律平等。不论国籍、民族、性别、职业、财产状况等，在法律面前一律平等...
```

## 注意事项

- 确保已正确设置环境变量(.env.local文件中的Supabase配置)
- 查询使用中文效果更佳
- 结果数量默认限制为5条，可在脚本中修改limit参数调整

## 故障排除

如果遇到问题，请检查：

1. 环境变量是否正确设置
2. Supabase数据库连接是否正常
3. 知识库中是否已有内容（先使用上传脚本添加内容）
4. 查询词是否足够具体（模糊匹配需要查询词出现在内容中）

通过这个工具，你可以快速验证上传的知识内容是否能被正确检索，有助于调试和完善知识库。 